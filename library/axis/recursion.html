

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Recursion &mdash; atlas 0.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="atlas 0.6 documentation" href="../../index.html"/>
        <link rel="up" title="The Axis Language" href="../axis.html"/>
        <link rel="next" title="Splitting Commands" href="split_comm.html"/>
        <link rel="prev" title="Control Structures" href="control_structures.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> atlas
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../gen_info.html">General Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_with_examples.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../atlas_lib.html">atlas Library</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">A Brief Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../axis.html">The Axis Language</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="design_principles.html">Design Principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="array.html">Array</a></li>
<li class="toctree-l3"><a class="reference internal" href="tuple_pattern.html">Tuple Displays and Pattern Matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit_conversion.html">Implicit Conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="def_mod_identifiers.html">Defining and Modifying Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="def_func_op.html">Defining Functions and Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="overload_redef_conflicts.html">Overloading v.s. Redefining, and Conflicts</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_structures.html">Control Structures</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="split_comm.html">Splitting Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_out_redir.html">Output, Input, and Redirection</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc.html">Miscellaneous Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="summary.html">Syntax Summary</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../operators.html">Basic Operators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../builtin_atlas_functions.html">Built-In <strong>atlas</strong> Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../usr_defined_functions.html">User Defined Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source_library.html">Source Code Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble_shooting.html">Trouble Shooting</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">atlas</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../atlas_lib.html">atlas Library</a> &raquo;</li>
      
          <li><a href="../axis.html">The Axis Language</a> &raquo;</li>
      
    <li>Recursion</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/library/axis/recursion.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="recursion">
<h1>Recursion<a class="headerlink" href="#recursion" title="Permalink to this headline">Â¶</a></h1>
<p>As mentioned above, axis strict scoping rules makes defining recursive
functions a bit more difficult than most programming languages do. It used to
be somewhat of an art to define a recursive function (it could, and can still,
be achieved by calling a function held in a variable to which the recursive
function itself is assigned), but starting with version 0.9 of axis there is
a keyword &#8216;rec_fun&#8217; that make this automatic (at least for simple recursive
functions; complicated mutually recursive definitions still require some
effort). Basically take the function definition as one would write it if
recursion were directly allowed, and the insert &#8216;rec_fun&#8217; before the recursive
name at its (function) definition. The only restriction is that the return
type must be explicitly specified (while it is option for ordinary functions);
failing to do so after rec_fun will result in a syntax error.</p>
<p>Here is the classical (but silly, as using a loop would do quite as well)
example of the factorial function &#8216;fac&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; set rec_fun fac (int n) = int: { return type int is specified }
  if n&lt;=0 then 1 else n*fac(n-1) fi
Defined fac: (int-&gt;int)
atlas&gt; fac(7)
Value: 5040
</pre></div>
</div>
<p>However, in practice it is often better to achieve recursion locally rather
than directly for the function defined by &#8216;set&#8217;, as this will allow the latter
to do some preliminary things that are not to be repeated at each recursive
call. For instance if in the above definition one wants to signal negative
arguments as errors rather than returning the (mathematically meaningless)
value 1 for them, this can be done as follows (the example also shows that the
recursive function need not have the same name as the global one:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; set fac (int n) = { no return type needed here }
if n&lt;0 then error(&quot;factorial of negative number &quot;,n,&quot; is not defined&quot;) fi;
let rec_fun f(int n) = int: { return type required here }
            if n&lt;=0 then 1 else n*f(n-1) fi
in f(n)
</pre></div>
</div>
<p>Since the local function f is defined only to be immediately called, one can
even make the recursive function anonymous to the outside, as follows:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; set fac (int n) = { no return type needed here }
if n&lt;0 then error(&quot;factorial of negative number &quot;,n,&quot; is not defined&quot;) fi;
(rec_fun f(int n) = int: if n&lt;=0 then 1 else n*f(n-1) fi) (n) { call it! }
</pre></div>
</div>
<p>Finally, one could avoid making a new (local) recursive function each time the
global function is called by postponing the introduction of its arguments;
this gives the following (optimal though maybe not optimally readable) style:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; set fac = { no arguments yet }
let rec_fun f(int n) = int: if n&lt;=0 then 1 else n*f(n-1) fi { build once }
in { now comes that actual definition of fac, an anonymous function }
(int n): { introduce argument of fac }
  if n&lt;0 then error(&quot;factorial of negative number &quot;,n,&quot; is not defined&quot;)
  else f(n) { call the recursive function }
  fi
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="split_comm.html" class="btn btn-neutral float-right" title="Splitting Commands" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="control_structures.html" class="btn btn-neutral" title="Control Structures" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, atlasofliegroups.org.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>


<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Tuple Displays and Pattern Matching &mdash; atlas 0.6 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="atlas 0.6 documentation" href="../../index.html"/>
        <link rel="up" title="The Axis Language" href="../axis.html"/>
        <link rel="next" title="Implicit Conversions" href="implicit_conversion.html"/>
        <link rel="prev" title="Array" href="array.html"/> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> atlas
          

          
          </a>

          
            
            
              <div class="version">
                0.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../gen_info.html">General Information</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getting_started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tutorial_with_examples.html">Tutorial</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../atlas_lib.html">atlas Library</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../intro.html">A Brief Introduction</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../axis.html">The Axis Language</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="design_principles.html">Design Principles</a></li>
<li class="toctree-l3"><a class="reference internal" href="types.html">Types</a></li>
<li class="toctree-l3"><a class="reference internal" href="array.html">Array</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="">Tuple Displays and Pattern Matching</a></li>
<li class="toctree-l3"><a class="reference internal" href="implicit_conversion.html">Implicit Conversions</a></li>
<li class="toctree-l3"><a class="reference internal" href="def_mod_identifiers.html">Defining and Modifying Identifiers</a></li>
<li class="toctree-l3"><a class="reference internal" href="def_func_op.html">Defining Functions and Operators</a></li>
<li class="toctree-l3"><a class="reference internal" href="overload_redef_conflicts.html">Overloading v.s. Redefining, and Conflicts</a></li>
<li class="toctree-l3"><a class="reference internal" href="control_structures.html">Control Structures</a></li>
<li class="toctree-l3"><a class="reference internal" href="recursion.html">Recursion</a></li>
<li class="toctree-l3"><a class="reference internal" href="split_comm.html">Splitting Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="in_out_redir.html">Output, Input, and Redirection</a></li>
<li class="toctree-l3"><a class="reference internal" href="misc.html">Miscellaneous Commands</a></li>
<li class="toctree-l3"><a class="reference internal" href="summary.html">Syntax Summary</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../source_library.html">Source Code Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../videos.html">Videos</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../trouble_shooting.html">Trouble Shooting</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../../index.html">atlas</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../../index.html">Docs</a> &raquo;</li>
      
          <li><a href="../../atlas_lib.html">atlas Library</a> &raquo;</li>
      
          <li><a href="../axis.html">The Axis Language</a> &raquo;</li>
      
    <li>Tuple Displays and Pattern Matching</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/library/axis/tuple_pattern.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="tuple-displays-and-pattern-matching">
<h1>Tuple Displays and Pattern Matching<a class="headerlink" href="#tuple-displays-and-pattern-matching" title="Permalink to this headline">Â¶</a></h1>
<p>If instead of brackets of a row display one uses parentheses to enclose a
sequence of expressions, then a tuple rather than an array is formed (except
in case there is exactly one expression in the sequence: then parentheses just
imply grouping as used for instance to override operator precedence). Tuples
differs from array in that there elements are not required to have the same
type, and (therefore) cannot be selected by position. In fact the type of a
tuples expression explicitly specifies the type of the component at each
position, and since the type checker insists that all expressions have a type,
it is not possible to work with a tuple not having a fixed number of
components (unlike arrays, which can well be of varying length). Tuple
displays are frequently used to pack the arguments of a function (officially
every function takes a single argument, but very often it is of tuple type).
So for instance &#8216;f(x,y)&#8217; applies the function &#8216;f&#8217; to a 2-tuple with components
&#8216;x&#8217; and &#8216;y&#8217;. But one is not obliged to write a tuple display as argument of a
function expecting a tuple; for instance after &#8216;set z=(3,4)&#8217; the variable &#8216;z&#8217;
holds a 2-tuple, and (the same instance of) &#8216;f&#8217; may also be called as &#8216;f(z)&#8217;.
One could even for instance multiply the components of &#8216;z&#8217; by writing <code class="docutils literal"><span class="pre">*z</span></code>
(giving 12 in the example); indeed the expression <code class="docutils literal"><span class="pre">3*4</span></code> is transformed by the
parser into <code class="docutils literal"><span class="pre">*(3,4)</span></code>, and (currently) this form is also used in error
messages, for instance in:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; GL(10/2)
Error in expression GL(/(10,2)) at &lt;standard input&gt;:...
  Failed to match &#39;GL&#39; with argument type rat
Type check failed
</pre></div>
</div>
<p>(The operator &#8216;/&#8217; on integers produces a rational number; for integer division
ignoring the remainder one should write 102 instead).</p>
<p>To decompose tuples, a simple form of pattern matching is provided: wherever
an identifier can be introduced, one may also specify a tuple of identifiers,
if the type of the value is appropriate, and the components will be bound to
the corresponding identifiers. So whereas:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; set x=E
</pre></div>
</div>
<p>introduces the identifier &#8216;x&#8217; whose value (and type) are set to that of the
expression &#8216;E&#8217;, one can alternatively say:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">atlas</span><span class="o">&gt;</span> <span class="nb">set</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">=</span><span class="n">E</span>
</pre></div>
</div>
<p>provided that E produces a pair (some value of some 2-tuple type), and the
variable &#8216;x&#8217; will be set to the first component of the pair, and &#8216;y&#8217; to the
second component. In either case, the types of the variables introduced will
be reported, as in:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; set (q,r) = 22 \% 7   { Euclidean division with remainder }
Identifiers q: int, r: int
atlas&gt; q    { quotient }
Value: 3
atlas&gt; r    { remainder }
Value: 1
</pre></div>
</div>
<p>The same pattern-matching is also allowed when introducing parameters of
user-defined functions, or when introducing local variables. To introduce
local variables one uses a syntax like that of &#8216;set&#8217; used above, but with
&#8216;let&#8217; instead of &#8216;set&#8217;, and followed by &#8216;in&#8217; and the &#8220;body&#8221; if the
let-expression, the expression where the local variable is in scope. So to
compute a value from the components of &#8216;z&#8217;, one could say:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">let</span> <span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="o">=</span><span class="n">z</span> <span class="ow">in</span> <span class="mi">3</span><span class="o">*</span><span class="n">y</span><span class="o">-</span><span class="n">x</span>
</pre></div>
</div>
<p>If only the first component is needed, there is no need to give a name to the
other one, so for the projection to the first component one can write:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">let</span> <span class="p">(</span><span class="n">x</span><span class="p">,)</span><span class="o">=</span><span class="n">z</span> <span class="ow">in</span> <span class="n">x</span>
</pre></div>
</div>
<p>Local variables get their value and type from the expression between &#8216;=&#8217; and
&#8216;in&#8217;, and are independent of any meaning that might previously be associated
to the identifier; after evaluation of the body, the local identifiers
introduced, and their values associated to them, are forgotten. (One can no
longer refer to the local name outside the expression following &#8216;in&#8217;; in some
cases references to them made from inside that expression may survive though.)</p>
<p>Using a local variable, the initial example could have been given in a form
that does not permanently bind the identifier &#8216;ic&#8217;:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span>atlas&gt; let ic = inner_class(&quot;B5.A3.T1&quot;,[[1/2,0,0],[0,1/2,1/2]],&quot;scc&quot;)
L &gt; in block_sizes(ic)
Value:
| 0,  0,   0,  0,   0,    0,    0,     1 |
| 0,  0,   0,  0,   0,    0,    0,    11 |
| 0,  0,   0,  0,   0,    0,    0,    10 |
| 0,  0,   0,  0,   0,    0,    0,    75 |
| 0,  0,   0,  0,   0,    0,    0,   110 |
| 0,  0,   0,  0,   0,    0,    3,    21 |
| 0,  0,   0,  0,   0,    0,    0,   305 |
| 0,  0,   0,  0,   0,    0,    0,   750 |
| 0,  0,   0,  0,   0,    0,   33,   231 |
| 0,  0,   0,  0,   0,    0,    0,   810 |
| 0,  0,   0,  0,   0,    0,    0,  3050 |
| 0,  0,   0,  0,   0,    0,  225,  1575 |
| 0,  0,   0,  1,  25,  130,    0,  1342 |
| 0,  0,   0,  0,   0,    0,    0,  8100 |
| 0,  0,   0,  0,   0,    0,  915,  6405 |
| 0,  0,   0, 10, 250, 1300,    0, 13420 |
| 0,  0,   0,  0,   0,    0, 2430, 17010 |
| 3, 75, 390, 21, 525, 2730, 4026, 28182 |
</pre></div>
</div>
<p>Note that axis recognized that the let-expression was incomplete after the
first line, changing the prompt to &#8216;L &gt;&#8217; in the second line to indicate this.</p>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="implicit_conversion.html" class="btn btn-neutral float-right" title="Implicit Conversions" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="array.html" class="btn btn-neutral" title="Array" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2016, atlasofliegroups.org.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'0.6',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>